## ## [Linux中的0号进程和1号进程（转发）](https://zhuanlan.zhihu.com/p/345642781)

作者：下雨天长晴的天儿  
链接：https://zhuanlan.zhihu.com/p/345642781  
来源：知乎  
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。  
  

系统允许一个进程创建新进程，新进程即为子进程，子进程还可以创建新的子进程，形成进程树结构模型。整个linux系统的所有进程也是一个树形结 构。树根是系统自动构造的，即在内核态下执行的0号进程，它是所有进程的祖先。由0号进程创建1号进程（内核态），1号负责执行内核的部分初始化工作及进 行系统配置，并创建若干个用于高速缓存和虚拟主存管理的内核线程。随后，1号进程调用execve（）运行可执行程序init，并演变成用户态1号进程， 即init进程。它按照配置文件/etc/initab的要求，完成系统启动工作，创建编号为1号、2号...的若干终端注册进程getty。  
每个getty进程设置其进程组标识号，并监视配置到系统终端的接口线路。当检测到来自终端的连接信号时，getty进程将通过函数execve（）执行 注册程序login，此时用户就可输入注册名和密码进入登录过程，如果成功，由login程序再通过函数execv（）执行shell，该shell进程 接收getty进程的pid，取代原来的getty进程。再由shell直接或间接地产生其他进程。  
  
上述过程可描述为：0号进程->1号内核进程->1号用户进程（init进程）->getty进程->shell进程  
注意，上述过程描述中提到：1号内核进程调用执行init并演变成1号用户态进程（init进程），这里前者是init是函数，后者是进程。两者容易混淆，区别如下：  
1.init（）函数在内核态运行，是内核代码  
2.init进程是内核启动并运行的第一个用户进程，运行在用户态下。  
3.一号内核进程调用execve（）从文件/etc/inittab中加载可执行程序init并执行，这个过程并没有使用调用do_fork()，因此两个进程都是1号进程。

